<div class="streams-detail">
  <div class="content" fxLayout="row wrap" fxLayoutAlign="space-between center">
    <a class="title" href="https://youtu.be/{{ stream.id }}">
      {{ stream.title }}
    </a>
    <a
      class="info"
      fxFlex="55"
      fxFlex.lt-sm="100"
      href="https://youtu.be/{{ stream.id }}"
    >
      <img
        class="cover"
        src="https://img.youtube.com/vi/{{ stream.id }}/maxresdefault.jpg"
      />
    </a>
    <div
      class="number"
      fxFlex="45"
      fxFlex.lt-sm="100"
      fxLayout="column"
      fxLayoutAlign="space-around"
    >
      <a
        class="vtuber-row"
        fxLayoutAlign="start center"
        [routerLink]="['/vtuber', stream.vtuberId]"
        *ngIf="findVTuber(stream.vtuberId); let vtuber"
      >
        <img
          class="profile"
          src="/assets/thumbnail/{{ stream.vtuberId }}.jpg"
        />
        <span class="name">{{ vtuber.name }}</span>
      </a>
      <div fxLayout="row" fxLayoutAlign="space-around">
        <div flex="50">
          <div class="value">
            {{ stream.start | date: "HH:mm:ss" }}
          </div>
          <div class="caption">直播開始</div>
        </div>
        <div flex="50">
          <div class="value">
            <ng-container *ngIf="stream.end; else clock">
              {{ stream.start | parseISO | duration: (stream.end | parseISO) }}
            </ng-container>
            <ng-template #clock>
              {{ stream.start | parseISO | duration: (everySecond$ | async) }}
            </ng-template>
          </div>
          <div class="caption">直播持續</div>
        </div>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-around">
        <div flex="50">
          <div class="value">
            {{ (stream.avgViewers | number) || " ----- " }}
          </div>
          <div class="caption">平均同接</div>
        </div>
        <div flex="50">
          <div class="value">
            {{ (stream.maxViewers | number) || " ----- " }}
          </div>
          <div class="caption">最高同接</div>
        </div>
      </div>
    </div>
  </div>
  <div class="chart">
    <hs-area-chart
      [youtube]="true"
      [results]="stats"
      [xAxisTicks]="xAxisTicks"
      [dateTickFormatting]="dateTickFormatting"
      [autoScale]="false"
      [xScaleMax]="xScaleMax"
      [xScaleMin]="xScaleMin"
      [timeline]="true"
    ></hs-area-chart>
  </div>
</div>
